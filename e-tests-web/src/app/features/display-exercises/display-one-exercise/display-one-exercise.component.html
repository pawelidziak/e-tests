<div class="single-exercise">

  <!-- EXERCISE HEADER -->
  <div class="exercise-header" [ngClass]="{'small-padding': !editMode, 'large-padding': editMode}">

    <!-- NO EDITABLE TITLE -->
    <div *ngIf="!editMode" class="width-100">
      <span class="exercise-number">{{number}}.</span>
      <span>{{exercise.question}}</span>
    </div>

    <!-- EDITABLE TITLE -->
    <div *ngIf="editMode" class="width-100" style="display: flex; align-items: center;"
         (keydown)="handleSpacebar($event)">
      <span class="exercise-number">{{number}}.</span>
      <mat-form-field color="accent"
                      class="width-100"
                      floatLabel="never">
        <input matInput
               type="text"
               placeholder="Question"
               [(ngModel)]="exercise.question">
      </mat-form-field>
    </div>

    <!-- HEADER BUTTONS -->
    <div *ngIf="isAuthor && !importMode">
      <div *ngIf="!editMode" class="edit-buttons">
        <mat-icon aria-label="Delete"
                  class="action-icon"
                  (click)="deleteExercise()"
                  matTooltip="Delete">
          delete
        </mat-icon>
        <mat-icon aria-label="Edit"
                  class="action-icon"
                  (click)="startEditExercise()"
                  matTooltip="Edit">
          edit_mode
        </mat-icon>
      </div>
      <div *ngIf="editMode" class="edit-buttons">
        <button mat-icon-button
                matTooltip="Save"
                (click)="saveExercise()"
                color="accent">
          <mat-icon>save</mat-icon>
        </button>
        <mat-icon aria-label="Add image"
                  id="addImageButton"
                  matTooltip="Not available yet">
          add_photo_alternate
        </mat-icon>
        <mat-icon aria-label="Cancel"
                  id="cancelButton"
                  class="action-icon"
                  (click)="stopEditExercise()"
                  matTooltip="Cancel">
          close
        </mat-icon>
      </div>
    </div><!-- /HEADER BUTTONS -->
  </div><!-- /EXERCISE HEADER -->

  <!-- ANSWERS -->
  <div class="exercise-answers row">
    <div *ngFor="let answer of exercise.answers; let j=index; trackBy: customTrackBy"
         [ngClass]="{'col-12 col-md-6': !editMode, 'col-12': editMode}"
         class="single-answer">

      <!-- NO EDITABLE ANSWER -->
      <div *ngIf="!editMode" class="no-editable-answer">
        <span [style.color]="checkIfIsCorrect(j) ? appSettings.currentTheme.accent : ''">
          {{getLetterFromAscii(j)}}
        </span>
        <span class="answer-text">{{answer}}</span>
      </div>

      <!-- EDITABLE ANSWER -->
      <div *ngIf="editMode" class="editable-answer">
        <mat-checkbox #matCheck
                      matTooltip="Correct"
                      [checked]="checkIfIsCorrect(j)"
                      (change)="changeCorrectAnswer(j, matCheck.checked)"
                      class="answer-checkbox"></mat-checkbox>

        <mat-form-field color="accent"
                        class="answer-text width-100"
                        style="margin-top: 12px;"
                        appearance="outline">
          <mat-label>{{'Answer ' + getLetterFromAscii(j)}}</mat-label>
          <input matInput
                 placeholder="Type the answer..."
                 [(ngModel)]="exercise.answers[j]">
        </mat-form-field>

        <button mat-icon-button
                style="outline: none;"
                id="deleteAnswerButton"
                (click)="deleteOneAnswer(j)"
                *ngIf="j > 1">
          <mat-icon aria-label="Delete answer">delete_outline</mat-icon>
        </button>
      </div>

    </div><!-- /single-answer -->

    <div *ngIf="editMode" class="col-md-6 add-answer">
      <button mat-button color="accent" (click)="exercise.answers.push('');">
        <mat-icon aria-label="Add answer">add</mat-icon>
        <span>Add answer</span>
      </button>
    </div>

  </div><!-- /ANSWERS -->
</div>
