<section class="section-display-exercises" *ngIf="copyExerciseList" id="endExercises">

  <!-- EXERCISES HEADER -->
  <div class="exercises-header">

    <mat-form-field *ngIf="searchInputFocused"
                    [@slideFromRightToRight]
                    appearance="legacy"
                    color="accent"
                    class="width-100"
                    floatLabel="never">
      <mat-label>Search exercise</mat-label>
      <input matInput [(ngModel)]="searchText"
             placeholder="Search exercise">
      <button mat-button matSuffix
              mat-icon-button
              aria-label="Close"
              (click)="searchInputFocused = false; searchText = ''">
        <mat-icon aria-label="Close">close</mat-icon>
      </button>
    </mat-form-field>

    <button mat-icon-button
            [matTooltip]="'Search'"
            *ngIf="!searchInputFocused"
            [disabled]="copyExerciseList.length === 0"
            (click)="searchInputFocused = true">
      <mat-icon aria-label="Search">search</mat-icon>
    </button>

    <button mat-icon-button
            [matTooltip]="'Expand'"
            *ngIf="!expandAllExercises"
            (click)="expandAllExercises = true">
      <mat-icon aria-label="Expand">unfold_more</mat-icon>
    </button>
    <button mat-icon-button
            [matTooltip]="'Collapse'"
            *ngIf="expandAllExercises"
            (click)="expandAllExercises = false">
      <mat-icon aria-label="Collapse">unfold_less</mat-icon>
    </button>
    <button mat-icon-button
            [matTooltip]="'Add exercise'"
            *ngIf="auth.currentUserId === authorId && !fixedAddButton"
            (click)="addExercise()">
      <mat-icon aria-label="Expand all">add</mat-icon>
    </button>


  </div> <!-- /EXERCISES HEADER -->

    <div *ngFor="let exercise of copyExerciseList | searchExercise : searchText; let i=index; trackBy: identifier">
      <app-display-one-exercise [exercise]="exercise"
                                [editMode]="!exercise.id"
                                [testId]="testId"
                                [isAuthor]="auth.currentUserId === authorId"
                                [number]="i + 1"
                                [expanded]="expandAllExercises"
                                (exerciseAdded)="handleExercisAdded()"
                                (exerciseDeleted)="handleExerciseDeleted($event)"
                                (exerciseCanceled)="handleExerciseCanceled($event)">
      </app-display-one-exercise>
    </div>

  <div class="exercise-actions">
    <button mat-raised-button
            *ngIf="auth.currentUserId === authorId && !fixedAddButton"
            color="accent"
            id="newExerciseButton"
            (click)="addExercise()"
            [style.background-image]="'linear-gradient(to right, '+
                appSettings?.currentTheme?.accent+', '+
                appSettings?.currentTheme?.primary +')'">
      <mat-icon aria-label="Add">add</mat-icon>
      <span>Add exercise</span>
    </button>
  </div>

  <!-- NO MATCHES -->
  <div *ngIf="copyExerciseList.length > 0 && (copyExerciseList | searchExercise: searchText).length === 0"
       class="no-matches">
    <mat-icon aria-label="No matches icon" class="no-matches-icon">sentiment_very_dissatisfied</mat-icon>
    <p><span class="text">No matches</span> for <strong>{{searchText}}</strong></p>
    <button mat-stroked-button color="accent" (click)="searchText = ''">clear input</button>
  </div>
</section>
